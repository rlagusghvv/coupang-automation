<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Couplus Uploader</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="wrap">
      <header class="hero">
        <p class="eyebrow">Couplus • Domeggook → Coupang</p>
        <h1>링크 하나로 자동 업로드</h1>
        <p class="sub">도매꾹 상품 URL만 넣으면, 이미지/상세/카테고리/가격까지 자동 처리합니다.</p>
        <p class="version" id="versionInfo">버전 확인 중...</p>
      </header>

      <section class="card">
        <div class="tabs">
          <button class="tab active" data-tab="upload">업로드</button>
          <button class="tab" data-tab="settings">설정</button>
          <button class="tab" data-tab="account">계정</button>
        </div>

        <div class="panel" id="panel-upload">
          <label for="url">도매꾹 상품 링크</label>
          <div class="row">
            <input id="url" type="url" placeholder="https://domeggook.com/..." />
            <button id="submit">업로드</button>
          </div>
          <p class="hint">1688 도메인은 자동 스킵됩니다.</p>
        </div>

        <div class="panel hidden" id="panel-settings">
          <div class="grid">
            <div>
              <label>쿠팡 Access Key</label>
              <input id="ckey" type="text" placeholder="access key" />
            </div>
            <div>
              <label>쿠팡 Secret Key</label>
              <input id="skey" type="password" placeholder="secret key" />
            </div>
            <div>
              <label>Vendor ID</label>
              <input id="vendorId" type="text" placeholder="A0..." />
            </div>
            <div>
              <label>Vendor User ID</label>
              <input id="vendorUserId" type="text" placeholder="..." />
            </div>
            <div>
              <label>배송사 코드</label>
              <input id="deliveryCode" type="text" placeholder="CJGLS" />
            </div>
            <div>
              <label>이미지 프록시</label>
              <input id="proxyBase" type="text" placeholder="https://coupang-automation.pages.dev" />
            </div>
            <div>
              <label>허용 IP 목록 (쉼표로 구분)</label>
              <input id="allowedIps" type="text" placeholder="104.28.211.26, 104.28.243.28" />
            </div>
            <div>
              <label>Pages 프로젝트명</label>
              <input id="pagesProjectName" type="text" placeholder="coupang-automation" />
            </div>
            <div>
              <label>Pages Account ID</label>
              <input id="pagesAccountId" type="text" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
            </div>
            <div>
              <label>Pages API Token</label>
              <input id="pagesApiToken" type="password" placeholder="cf api token" />
            </div>
            <div>
              <label>Pages 자동 배포</label>
              <input id="pagesAutoDeploy" type="checkbox" />
            </div>
          </div>

          <div class="grid">
            <div>
              <label>마진률 (예: 0.3)</label>
              <input id="marginRate" type="number" step="0.01" />
            </div>
            <div>
              <label>추가금 (원)</label>
              <input id="marginAdd" type="number" step="10" />
            </div>
            <div>
              <label>최소가격</label>
              <input id="priceMin" type="number" step="10" />
            </div>
            <div>
              <label>라운딩 단위</label>
              <input id="roundUnit" type="number" step="1" />
            </div>
          </div>
          <p class="hint">가격 공식: 도매꾹가 × (1+마진률) + 추가금 → 라운딩</p>

          <div class="row">
            <label class="toggle">
              <input id="autoRequest" type="checkbox" />
              <span>자동 승인요청 (임시저장 없이 요청)</span>
            </label>
            <button id="saveSettings">설정 저장</button>
          </div>
        </div>

        <div class="panel hidden" id="panel-account">
          <div class="grid">
            <div>
              <label>이메일</label>
              <input id="email" type="email" />
            </div>
            <div>
              <label>비밀번호</label>
              <input id="password" type="password" />
            </div>
          </div>
          <div class="row">
            <button id="signup">회원가입</button>
            <button id="login">로그인</button>
            <button id="logout">로그아웃</button>
          </div>
          <p class="hint" id="authStatus">로그인 필요</p>
        </div>
      </section>

      <section class="card">
        <div class="status">
          <div class="dot" id="dot"></div>
          <span id="status">대기 중</span>
        </div>
        <div id="summary" class="summary hidden"></div>
        <details class="raw">
          <summary>상세 로그 보기</summary>
          <pre id="log" class="log"></pre>
        </details>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
